{%- import "struct_macros.tmpl" as struct_macros %}
size_t GetSerializedSize_(const {{struct.name}}& input) {
  {{struct_macros.get_serialized_size(struct, "input.%s")}}
  return size;
}

mojo::internal::ValidationError Serialize_(
    {{struct.name}}* input,
    mojo::internal::Buffer* buf,
    internal::{{struct.name}}_Data** output) {
  if (input) {
    {{struct_macros.serialize(struct, struct.name ~ " struct", "input->%s", "result", "buf", true)|indent(2)}}
    *output = result;
  } else {
    *output = nullptr;
  }
  return mojo::internal::VALIDATION_ERROR_NONE;
}

void Deserialize_(internal::{{struct.name}}_Data* input,
                  {{struct.name}}* result) {
  if (input) {
    {{struct_macros.deserialize(struct, "input", "result->%s")|indent(2)}}
  }
}
